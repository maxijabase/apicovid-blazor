@page "/"
@using System.IO
@inject HttpClient Http

<h1>Bienvenido a la consulta de casos de COVID-19</h1>

@if (DatasetExists == null)
{
	<p>Cargando...</p>
}
else if ((bool)!DatasetExists)
{
	<p>No se encontró el dataset, descárguelo <a href="https://sisa.msal.gov.ar/datos/descargas/covid-19/files/Covid19Casos.zip">aquí</a>, descomprímalo y colóquelo en la raíz de este proyecto.</p>
}
else
{
	<p>Dataset presente! Se pueden consultar los casos</p>

	<ConsultaCovid Tipo="ConsultaCovid.TipoConsulta.Contagios"/>
	<br />
	<hr />
	<hr />
	<br />
	<ConsultaCovid Tipo="ConsultaCovid.TipoConsulta.Muertes"/>

	<h2>Ingreso Datos</h2>
}


@code {

	private bool? DatasetExists = null;
	private bool BajandoDataset = true;

	protected override async Task OnInitializedAsync()
	{
		var existeDto = await Http.GetFromJsonAsync<ExisteDatasetDTO>("Covid/existeDataset");
		DatasetExists = existeDto.Existe;
	}


}